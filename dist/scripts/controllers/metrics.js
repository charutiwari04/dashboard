"use strict";angular.module("dashboardApp").controller("MetricsCtrl",["$scope",function($scope){var uri="../data/IssueChart_Data.csv";!function poll(){var data_metrics=[],count2008=0,count2009=0,count2010=0,count2011=0,count2012=0,count2013=0,count2014=0,count2015=0,count2016=0,openC2008=0,openC2009=0,openC2010=0,openC2011=0,openC2012=0,openC2013=0,openC2014=0,openC2015=0,openC2016=0,line_charts=[],bar_charts=[],issue_count=0;$scope.metricsData=[],$.ajax({type:"GET",url:uri,dataType:"text",async:!1,success:function(response){data_metrics=$.csv.toArrays(response),$.each(data_metrics,function(e,a){var t=a[0].substr(0,4);switch(t){case"2008":count2008++,"Open"===a[4]&&openC2008++;break;case"2009":count2009++,"Open"===a[4]&&openC2009++;break;case"2010":count2010++,"Open"===a[4]&&openC2009++;break;case"2011":count2011++,"Open"===a[4]&&openC2011++;break;case"2012":count2012++,"Open"===a[4]&&openC2012++;break;case"2013":count2013++,"Open"===a[4]&&openC2013++;break;case"2014":count2014++,"Open"===a[4]&&openC2014++;break;case"2015":count2015++,"Open"===a[4]&&openC2015++;break;case"2016":count2016++,"Open"===a[4]&&openC2016++}}),line_charts.push(["Year","Paying Customers"]),bar_charts.push(["Year","Reported Issues"]);for(var i=2008;i<=2016;i++){var cnt1="openC".concat(i),cnt2="count".concat(i),arr=[];arr.push(Number(i)),arr.push(Number(eval(cnt1))),line_charts.push(arr);var arrN=[];arrN.push(Number(i)),arrN.push(Number(eval(cnt2))),bar_charts.push(arrN),issue_count+=eval(cnt1)}var options={title:"Paying Customers Over Period of Time",curveType:"function",legend:{position:"bottom"}},baroptions={title:"Reported Issues Over Period of Time",legend:{position:"none"}};$scope.openis=issue_count;var data=google.visualization.arrayToDataTable(line_charts),databar=google.visualization.arrayToDataTable(bar_charts),chart=new google.visualization.LineChart(document.getElementById("line-grf")),chartbar=new google.visualization.BarChart(document.getElementById("bar-grf"));chart.draw(data,options),chartbar.draw(databar,baroptions)},complete:poll,timeout:3e4})}()}]);